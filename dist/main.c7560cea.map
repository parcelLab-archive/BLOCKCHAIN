{"version":3,"sources":["settings.js","../node_modules/tiny-emitter/index.js","../node_modules/nanostore/nanostore.js","store.js","main.js"],"names":["module","exports","calledItContractAddress","contractInterface","Nanostore","require","store","loading","callId","currentCall","error","on","newCallId","set","window","fetchCall","then","res","catch","console","log","err","text","txAmount","web3","toWei","gasAmount","calledItContract","callIt","value","gas","callIt_success","settings","initialize","Web3","currentProvider","web3interface","eth","contract","at","id","cb","Promise","resolve","reject","calls"],"mappings":"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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.c7560cea.map","sourceRoot":"../src","sourcesContent":["module.exports = {\n  calledItContractAddress: '0x7e26024f100dbbc9781f14e2d4e5cba49a3f9081',\n  contractInterface: [{ 'constant': false, 'inputs': [{ 'name': '_fee', 'type': 'uint256' }], 'name': 'setCallingFee', 'outputs': [], 'payable': false, 'stateMutability': 'nonpayable', 'type': 'function' }, { 'constant': false, 'inputs': [], 'name': 'withdraw', 'outputs': [], 'payable': false, 'stateMutability': 'nonpayable', 'type': 'function' }, { 'constant': false, 'inputs': [{ 'name': '_description', 'type': 'string' }], 'name': 'callIt', 'outputs': [{ 'name': 'callID', 'type': 'uint256' }], 'payable': true, 'stateMutability': 'payable', 'type': 'function' }, { 'constant': true, 'inputs': [], 'name': 'owner', 'outputs': [{ 'name': '', 'type': 'address' }], 'payable': false, 'stateMutability': 'view', 'type': 'function' }, { 'constant': true, 'inputs': [{ 'name': '', 'type': 'uint256' }], 'name': 'calls', 'outputs': [{ 'name': 'description', 'type': 'string' }, { 'name': 'caller', 'type': 'address' }, { 'name': 'createdDate', 'type': 'uint256' }], 'payable': false, 'stateMutability': 'view', 'type': 'function' }, { 'constant': false, 'inputs': [{ 'name': 'newOwner', 'type': 'address' }], 'name': 'transferOwnership', 'outputs': [], 'payable': false, 'stateMutability': 'nonpayable', 'type': 'function' }, { 'anonymous': false, 'inputs': [{ 'indexed': true, 'name': 'previousOwner', 'type': 'address' }, { 'indexed': true, 'name': 'newOwner', 'type': 'address' }], 'name': 'OwnershipTransferred', 'type': 'event' }],\n}\n","function E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\n","'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar Emitter = require('tiny-emitter');\n\nfunction Store() {\n  var initial = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var bus = new Emitter();\n  var state = _extends({}, initial);\n\n  this.on = bus.on.bind(bus);\n  this.emit = bus.emit.bind(bus);\n\n  this.set = function (stateMod) {\n    state = _extends({}, state, stateMod);\n    this.emit('state:changed');\n  };\n\n  this.get = function () {\n    return state;\n  };\n\n  this.subscribe = function (fn) {\n    var _this = this;\n\n    this.on('state:changed', function () {\n      fn(_this.get());\n    });\n  };\n}\n\nmodule.exports = Store;\n\n","const Nanostore = require('nanostore')\nconst store = new Nanostore({\n  loading: false,\n  callId: null,\n  currentCall: null,\n  error: null,\n})\n\nstore.on('fetchCall', (newCallId) => {\n  store.set({ loading: true })\n\n  window.fetchCall(newCallId)\n    .then(res => {\n      store.set({ callId: newCallId, currentCall: res, loading: false, error: null })\n    })\n    .catch(err => {\n      console.log(err)\n      store.set({ loading: false, callId: newCallId, currentCall: [] })\n    })\n})\n\nstore.on('callIt', (text) => {\n  store.set({ loading: true })\n  const txAmount = window.web3.toWei(0.001, 'ether')\n  const gasAmount = window.web3.toWei(0.0000000000005, 'ether')\n\n  window.calledItContract.callIt(text, { value: txAmount, gas: gasAmount }, (err, res) => {\n    if (err) store.set({ error: err, loading: false })\n    else store.set({ callIt_success: true, loading: false })\n  })\n})\n\nmodule.exports = store\n","const settings = require('./settings')\nconst store = require('./store')\n\nif (typeof window.web3 !== 'undefined') {\n  initialize(new window.Web3(window.web3.currentProvider))\n} else {\n  initialize(null)\n}\n\nfunction initialize (web3interface) {\n  if (web3interface) {\n    window.web3interface = web3interface\n    window.calledItContract = web3interface.eth\n      .contract(settings.contractInterface).at(settings.calledItContractAddress)\n\n    window.fetchCall = (id, cb) => new Promise((resolve, reject) => {\n      window.calledItContract.calls(id, (err, res) => {\n        if (err) reject(err)\n        else resolve(res)\n      })\n    })\n  } else store.set({ error: ' ðŸ¦Š You need to install MetaMask!' })\n  window.store = store // just debug things\n}\n"]}